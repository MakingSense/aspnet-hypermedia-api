nuget:
  account_feed: true

version: 0.1.0-rc1-final-{build}

# init:
#  - git config --global core.autocrlf true

#install:
# - cmd: nuget sources add -Name api.nuget.org -Source https://api.nuget.org/v3/index.json
# - cmd: nuget sources add -Name aspnetrelease -Source https://www.myget.org/F/aspnetrelease/api/v2

#environment:
#  DNX_BUILD_VERSION: rc1-final
#  DNX_ASSEMBLY_FILE_VERSION: 2.0.0

before_build:
 - ps: dnvm install 1.0.0-rc1-update1
 - ps: dnvm upgrade
 - ps: dnvm update-self
 - ps: dnvm list
 - ps: dnvm use 1.0.0-rc1-update1
 - ps: dnu restore
 - cmd: set DNX_BUILD_VERSION=%APPVEYOR_BUILD_NUMBER%

artifacts:
 - path: '**\*.nupkg'
 
notifications:
  - provider: Slack
    auth_token:
      secure: fOssPHTsqm6seWcnywN2TJE9gLtRdd1iXLRWWWWAhx4atR0u0ECGb/9Ij/gI/zafJI+FQvevEemi9epjeRhV/g==
    channel: rest-api
    template: "<{{buildUrl}}|Build {{projectName}} {{buildVersion}} {{status}}> Commit <{{commitUrl}}|{{commitId}}> by {{commitAuthor}} on {{commitDate}}: _{{commitMessage}}_"
